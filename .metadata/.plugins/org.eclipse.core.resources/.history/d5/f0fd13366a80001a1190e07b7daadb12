var action = {
		
		init : function () {
			var _this = this;
			
			$('#orderSave').click(function () {
				_this.save();
			});
		},
		
		
		save : function () {
			var details = [];
			var getBasket = $(".basket");
			
			getBasket.children('.orderdetail').each(function () {
				console.log( parseInt(jQuery(this).find('.detailProduct').text()));
				var detail={
						whip: JSON.parse(jQuery(this).find('.detailWhip').attr('value')),
						shot: parseInt(jQuery(this).find('.detailShot').attr('value')),
						quantity: parseInt(jQuery(this).find('.detailQuantity').attr('value')),
						product: parseInt(jQuery(this).find('.detailProduct').text())
					};
				details.push(detail);
			});
			
			var order = {
					userId:  $('#userId').text(),
					details: details
			};

			console.log(order.details);
				
			
			$.ajax({
				type: 'POST',
				url: '/api/order/v1',
				dataType:'json',
				contentType: 'application/json; charset=utf-8',
				data: JSON.stringify(order)
				
			}).done(function() {
				alert('주문이 완료되었습니다.');
				window.location.href="/";
			}).fail(function (error) {
				alert(JSON.stringify(error));
			});
		}
		

};

action.init();