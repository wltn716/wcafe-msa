package com.js.wcafeOrder.service;

import static org.assertj.core.api.Assertions.assertThat;

import java.util.List;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;

import com.js.wcafeOrder.dao.OrderMapper;
import com.js.wcafeOrder.dto.Order;
import com.js.wcafeOrder.dto.Orderdetail;

@RunWith(SpringRunner.class)
@SpringBootTest
public class OrderServiceTest {
	
	@Autowired
	OrderMapper orderService;
	
	@Test
	public void 주문등록_후_불러오기() {
		String name="user";
		Orderdetail[] details = new Orderdetail[2];
		details[0] = Orderdetail.builder()
				.whip(false)
				.shot(2)
				.quantity(2)
				.productId(1)
				.build();
		details[1] = Orderdetail.builder()
				.whip(false)
				.shot(1)
				.quantity(3)
				.productId(2)
				.build();
		
		orderService.insertOrder(Order.builder()
				.userId(name)
				.detail(details[0])
				.detail(details[1])
				.build());
		
		List<Order> orderList= orderService.readAll();
		
		Order order = orderList.get(orderList.size()-1);
		System.out.println(order);
		assertThat(order.getUserId()).isEqualTo("user");
		
	}

}
