package com.js.wcafeWeb.web;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.js.wcafe.dto.Account;
import com.js.wcafeWeb.client.OrderClient;
import com.js.wcafeWeb.client.ProductClient;
import com.js.wcafeWeb.dto.Category;
import com.js.wcafeWeb.dto.Order;


@RestController
public class HomeController {
	
	@Autowired
    private OrderClient orderClient;
	
	@Autowired
	private ProductClient productClient;
	
	@RequestMapping("/")
    public String index(Model m) {
		m.addObject("currentUser", currentUser);
		m.addObject("_csrf", csrfToken.getToken());
		m.addObject("_csrf_header", csrfToken.getHeaderName());
		m.addObject("categories",categoryService.all());
		m.addObject("myRecentOrders", accountService.recentOrder(currentUser.getId()));
		m.addObject("waitingTime", orderService.watingInfo());
		return "index";
    }
}
